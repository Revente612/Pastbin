<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PastBin - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ö–æ—Å—Ç–∏–Ω–≥</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #000000;
            color: #e0e0e0;
            line-height: 1.6;
            min-height: 100vh;
        }

        .hidden {
            display: none !important;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å */
        .navbar {
            background-color: #111111;
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.8);
            border-bottom: 1px solid #222;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .nav-logo h1 {
            font-size: 1.8rem;
            color: #ff4444;
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.3);
            cursor: pointer;
        }

        .nav-search {
            display: flex;
            gap: 0.5rem;
            flex: 1;
            max-width: 400px;
            margin: 0 2rem;
        }

        .nav-search input {
            padding: 0.5rem 1rem;
            border: 1px solid #222;
            border-radius: 25px;
            background-color: #111;
            color: #e0e0e0;
            flex: 1;
        }

        .nav-search input:focus {
            outline: none;
            border-color: #ff4444;
            box-shadow: 0 0 10px rgba(255, 68, 68, 0.2);
        }

        .nav-search button, .nav-auth button {
            padding: 0.5rem 1.5rem;
            background: linear-gradient(135deg, #ff4444, #cc3333);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            white-space: nowrap;
        }

        .nav-search button:hover, .nav-auth button:hover {
            background: linear-gradient(135deg, #ff5555, #dd4444);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 68, 68, 0.3);
        }

        #addPasteBtn {
            font-size: 1.5rem;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #00c851, #007e33);
            border-radius: 50%;
        }

        #addPasteBtn:hover {
            background: linear-gradient(135deg, #00d855, #008f3a);
        }

        .nav-auth {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        #telegramBtn {
            background: linear-gradient(135deg, #0088cc, #006699);
        }

        #telegramBtn:hover {
            background: linear-gradient(135deg, #0099dd, #0077aa);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: #111;
            border-radius: 20px;
            border: 1px solid #222;
            cursor: pointer;
            position: relative;
        }

        .user-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: #111;
            border: 1px solid #222;
            border-radius: 10px;
            padding: 0.5rem;
            min-width: 200px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .user-menu-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .user-menu-item:hover {
            background: #222;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ff4444;
        }

        .user-rating {
            color: #ffd700;
            font-size: 0.9rem;
        }

        .scoin-balance {
            background: linear-gradient(135deg, #ffd700, #ff6b00);
            color: #000;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .welcome-section, .auth-section, .paste-section, .profile-section, .chat-section, .shop-section, .messenger-section {
            background: #111;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            margin-bottom: 2rem;
            border: 1px solid #222;
            position: relative;
            overflow: hidden;
        }

        .welcome-section::before, .auth-section::before, .paste-section::before, .profile-section::before, .chat-section::before, .shop-section::before, .messenger-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #ff4444);
        }

        .welcome-section h2, .auth-section h2, .paste-section h2, .profile-section h2, .chat-section h2, .shop-section h2, .messenger-section h2 {
            margin-bottom: 1rem;
            color: #ff4444;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* –ú–∞–≥–∞–∑–∏–Ω */
        .shop-categories {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #222;
        }

        .shop-category {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: #aaa;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .shop-category.active {
            color: #ff4444;
            border-bottom-color: #ff4444;
        }

        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .shop-item {
            background: #151515;
            border-radius: 10px;
            padding: 1.5rem;
            border: 1px solid #222;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .shop-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.2);
        }

        .shop-item-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .shop-item-name {
            font-size: 1.2rem;
            color: #ff4444;
            margin-bottom: 0.5rem;
        }

        .shop-item-price {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .shop-item-description {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* –ü–æ–¥–∞—Ä–∫–∏ */
        .gifts-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .gift-item {
            background: #151515;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            border: 1px solid #222;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .gift-item:hover {
            transform: scale(1.05);
        }

        .gift-emoji {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .gift-name {
            font-size: 0.8rem;
            color: #ffaa00;
        }

        /* –ü—Ä–æ—Ñ–∏–ª—å —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏ */
        .profile-with-gifts {
            position: relative;
            background: linear-gradient(135deg, #1a1a1a, #2a1a2a);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .profile-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            border-radius: 15px;
            z-index: 1;
        }

        .profile-content {
            position: relative;
            z-index: 2;
        }

        .received-gifts {
            margin-top: 2rem;
        }

        .gift-display {
            display: inline-block;
            margin: 0.5rem;
            text-align: center;
        }

        .gift-count {
            font-size: 0.7rem;
            color: #aaa;
        }

        /* –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä */
        .messenger-container {
            display: flex;
            height: 500px;
            border: 1px solid #222;
            border-radius: 10px;
            overflow: hidden;
        }

        .contacts-list {
            width: 300px;
            background: #151515;
            border-right: 1px solid #222;
            overflow-y: auto;
        }

        .contact {
            padding: 1rem;
            border-bottom: 1px solid #222;
            cursor: pointer;
            transition: background 0.3s;
        }

        .contact:hover, .contact.active {
            background: #222;
        }

        .contact-name {
            font-weight: bold;
            color: #ff4444;
        }

        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 1rem;
            background: #151515;
            border-bottom: 1px solid #222;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 70%;
            padding: 0.75rem 1rem;
            border-radius: 15px;
            position: relative;
        }

        .message.sent {
            align-self: flex-end;
            background: #ff4444;
            border-bottom-right-radius: 5px;
        }

        .message.received {
            align-self: flex-start;
            background: #222;
            border-bottom-left-radius: 5px;
        }

        .message-sender {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 0.25rem;
        }

        .message-text {
            word-wrap: break-word;
        }

        .message-time {
            font-size: 0.7rem;
            color: #888;
            text-align: right;
            margin-top: 0.25rem;
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            background: #151515;
            border-top: 1px solid #222;
        }

        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #222;
            border-radius: 25px;
            background: #1a1a1a;
            color: #e0e0e0;
        }

        .chat-input button {
            margin-left: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
        }

        /* –§–æ—Ä–º—ã */
        form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        input, textarea, select {
            padding: 1rem;
            border: 1px solid #222;
            border-radius: 8px;
            font-size: 1rem;
            background: #1a1a1a;
            color: #e0e0e0;
            transition: all 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #ff4444;
            box-shadow: 0 0 15px rgba(255, 68, 68, 0.2);
        }

        textarea {
            min-height: 300px;
            resize: vertical;
            font-family: 'Courier New', monospace;
            line-height: 1.4;
        }

        button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #ff4444, #cc3333);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            background: linear-gradient(135deg, #ff5555, #dd4444);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.3);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        a {
            color: #ffaa00;
            text-decoration: none;
            transition: color 0.3s;
        }

        a:hover {
            color: #ffcc00;
            text-decoration: underline;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: #111;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid #222;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: #aaa;
            transition: color 0.3s;
        }

        .close:hover {
            color: #ff4444;
        }

        /* –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤ */
        .gift-upgrade {
            margin-top: 1rem;
            padding: 1rem;
            background: #151515;
            border-radius: 8px;
            border: 1px solid #222;
        }

        .upgrade-level {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .upgrade-cost {
            color: #ffd700;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-search {
                width: 100%;
                max-width: none;
                margin: 0;
            }
            
            .container {
                margin: 1rem auto;
            }
            
            .shop-items {
                grid-template-columns: 1fr;
            }
            
            .gifts-container {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .messenger-container {
                flex-direction: column;
                height: 600px;
            }
            
            .contacts-list {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid #222;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .shop-item, .gift-item {
            animation: fadeIn 0.5s ease-out;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–∫—É–ø–∫–∏ */
        @keyframes coinAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .coin-animation {
            animation: coinAnimation 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1><i class="fas fa-skull-crossbones"></i> PastBin</h1>
                <span class="ddos-protection">
                    <i class="fas fa-shield-alt"></i> DDoS Protected
                </span>
            </div>
            <div class="nav-search">
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ ID –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É...">
                <button id="searchBtn"><i class="fas fa-search"></i> –ù–∞–π—Ç–∏</button>
            </div>
            <div class="nav-auth">
                <button id="telegramBtn"><i class="fab fa-telegram"></i> AttackPsychos</button>
                <div id="userInfo" class="user-info hidden">
                    <img id="userAvatarImg" src="" alt="Avatar" class="user-avatar">
                    <span id="userName"></span>
                    <div class="scoin-balance">
                        <i class="fas fa-coins"></i>
                        <span id="scoinBalance">0</span>
                    </div>
                    <div id="userMenu" class="user-menu hidden">
                        <div class="user-menu-item" onclick="showProfile()">
                            <i class="fas fa-user"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                        </div>
                        <div class="user-menu-item" onclick="showShop()">
                            <i class="fas fa-shopping-cart"></i> –ú–∞–≥–∞–∑–∏–Ω
                        </div>
                        <div class="user-menu-item" onclick="showMessenger()">
                            <i class="fas fa-comments"></i> –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
                        </div>
                        <div class="user-menu-item" onclick="switchAccount()">
                            <i class="fas fa-exchange-alt"></i> –°–º–µ–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                        </div>
                        <div class="user-menu-item" onclick="addAccount()">
                            <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                        </div>
                        <div class="user-menu-item" onclick="logout()" style="color: #ff4444;">
                            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
                        </div>
                    </div>
                </div>
                <button id="loginBtn">–í–æ–π—Ç–∏</button>
                <button id="registerBtn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button id="addPasteBtn" class="hidden">+</button>
                <button id="logoutBtn" class="hidden">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="container">
        <!-- –ú–∞–≥–∞–∑–∏–Ω -->
        <section id="shopSection" class="shop-section hidden">
            <h2>–ú–∞–≥–∞–∑–∏–Ω –°–∫–æ–∏–Ω–æ–≤ <span class="scoin-balance" style="font-size: 1rem;">–í–∞—à –±–∞–ª–∞–Ω—Å: <span id="shopScoinBalance">0</span></span></h2>
            
            <div class="shop-categories">
                <button class="shop-category active" data-category="backgrounds">–§–æ–Ω—ã –ø—Ä–æ—Ñ–∏–ª—è</button>
                <button class="shop-category" data-category="gifts">–ü–æ–¥–∞—Ä–∫–∏</button>
                <button class="shop-category" data-category="badges">–ë–µ–π–¥–∂–∏</button>
                <button class="shop-category" data-category="special">–û—Å–æ–±—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã</button>
            </div>

            <div id="shopItemsContainer" class="shop-items">
                <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </section>

        <!-- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä -->
        <section id="messengerSection" class="messenger-section hidden">
            <h2>–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h2>
            <div class="messenger-container">
                <div class="contacts-list" id="contactsList">
                    <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                </div>
                <div class="chat-area">
                    <div class="chat-header" id="chatHeader">
                        –í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." disabled>
                        <button id="sendMessageBtn" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ (–ø—Ä–æ—Ñ–∏–ª—å, —á–∞—Ç—ã, –ø–∞—Å—Ç—ã –∏ —Ç.–¥.) -->
        <section id="welcomeSection" class="welcome-section">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ PastBin</h2>
            <p>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –°–∫–æ–∏–Ω—ã –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Å—Ç –∏ –ø–æ–∫—É–ø–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ!</p>
            <!-- –û—Å—Ç–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        </section>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏ -->
        <section id="profileSection" class="profile-section hidden">
            <div class="profile-with-gifts" id="profileWithGifts">
                <div class="profile-background" id="profileBackground"></div>
                <div class="profile-content">
                    <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    <div id="profileInfo">
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ -->
                    </div>
                    <div class="received-gifts">
                        <h3>–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h3>
                        <div id="receivedGiftsContainer" class="gifts-container"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞ -->
    <div id="sendGiftModal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="closeModal('sendGiftModal')">&times;</span>
            <h2>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
            <div id="giftSelection" class="gifts-container"></div>
            <div class="form-group">
                <label>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</label>
                <input type="text" id="giftRecipient" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <button onclick="sendGift()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–¥–∞—á–∏ –°–∫–æ–∏–Ω–æ–≤ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
    <div id="giveScoinsModal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="closeModal('giveScoinsModal')">&times;</span>
            <h2>–í—ã–¥–∞—Ç—å –°–∫–æ–∏–Ω—ã</h2>
            <div class="form-group">
                <label>–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</label>
                <input type="text" id="scoinRecipient" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –°–∫–æ–∏–Ω–æ–≤:</label>
                <input type="number" id="scoinAmount" placeholder="100" min="1" max="10000">
            </div>
            <button onclick="giveScoins()">–í—ã–¥–∞—Ç—å –°–∫–æ–∏–Ω—ã</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤ -->
    <div id="upgradeGiftModal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="closeModal('upgradeGiftModal')">&times;</span>
            <h2>–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
            <div id="upgradeGiftContainer">
                <!-- –£–ª—É—á—à–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ -->
    <div id="accountsModal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="closeModal('accountsModal')">&times;</span>
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</h2>
            <div id="accountsList">
                <!-- –°–ø–∏—Å–æ–∫ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
            </div>
            <div class="form-group">
                <label>–ù–æ–≤—ã–π –Ω–æ–º–µ—Ä:</label>
                <input type="text" id="newPhoneNumber" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–π –Ω–æ–º–µ—Ä">
            </div>
            <div class="form-group">
                <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                <input type="text" id="newUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <button onclick="createNewAccount()">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞
        const shopItems = {
            backgrounds: [
                {
                    id: 'bg1',
                    name: '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω',
                    price: 100,
                    image: 'https://i.imgur.com/3Q7Yc7Q.png',
                    description: '–ö—Ä–∞—Å–∏–≤—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è',
                    type: 'background'
                },
                {
                    id: 'bg2',
                    name: '–û–≥–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω',
                    price: 150,
                    image: 'https://i.imgur.com/3Q7Yc7Q.png',
                    description: '–ì–æ—Ä—è—á–∏–π –æ–≥–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω',
                    type: 'background'
                },
                {
                    id: 'bg3',
                    name: '–ù–µ–æ–Ω–æ–≤—ã–π —Ñ–æ–Ω',
                    price: 200,
                    image: 'https://i.imgur.com/3Q7Yc7Q.png',
                    description: '–Ø—Ä–∫–∏–π –Ω–µ–æ–Ω–æ–≤—ã–π —Ñ–æ–Ω',
                    type: 'background'
                }
            ],
            gifts: [
                {
                    id: 'pepe',
                    name: '–ü–µ–ø–µ',
                    price: 50,
                    emoji: 'üê∏',
                    description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ü–µ–ø–µ',
                    basePrice: 50,
                    upgradeLevel: 0,
                    maxLevel: 5
                },
                {
                    id: 'drink',
                    name: '–ù–∞–ø–∏—Ç–æ–∫',
                    price: 30,
                    emoji: 'ü•§',
                    description: '–û—Å–≤–µ–∂–∞—é—â–∏–π –Ω–∞–ø–∏—Ç–æ–∫',
                    basePrice: 30,
                    upgradeLevel: 0,
                    maxLevel: 5
                },
                {
                    id: 'candy',
                    name: '–ö–æ–Ω—Ñ–µ—Ç–∞',
                    price: 20,
                    emoji: 'üç¨',
                    description: '–°–ª–∞–¥–∫–∞—è –∫–æ–Ω—Ñ–µ—Ç–∞',
                    basePrice: 20,
                    upgradeLevel: 0,
                    maxLevel: 5
                },
                {
                    id: 'gift1',
                    name: '–°–µ—Ä–¥–µ—á–∫–æ',
                    price: 10,
                    emoji: '‚ù§Ô∏è',
                    description: '–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–µ—Ä–¥–µ—á–∫–æ –¥—Ä—É–≥—É'
                },
                {
                    id: 'gift2',
                    name: '–ó–≤–µ–∑–¥–∞',
                    price: 20,
                    emoji: '‚≠ê',
                    description: '–°–∏—è—é—â–∞—è –∑–≤–µ–∑–¥–∞'
                }
            ],
            badges: [
                {
                    id: 'badge1',
                    name: '–ë–µ–π–¥–∂ "–ê–∫—Ç–∏–≤–Ω—ã–π"',
                    price: 300,
                    image: 'https://i.imgur.com/3Q7Yc7Q.png',
                    description: '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'
                }
            ],
            special: [
                {
                    id: 'special1',
                    name: '–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω',
                    price: 500,
                    image: 'https://i.imgur.com/3Q7Yc7Q.png',
                    description: '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω'
                }
            ]
        };

        // –°–∏—Å—Ç–µ–º–∞ –°–∫–æ–∏–Ω–æ–≤ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        let userScoins = JSON.parse(localStorage.getItem('pastbin_scoins')) || {};
        let userInventory = JSON.parse(localStorage.getItem('pastbin_inventory')) || {};
        let userGifts = JSON.parse(localStorage.getItem('pastbin_gifts')) || {};
        let giftUpgrades = JSON.parse(localStorage.getItem('pastbin_gift_upgrades')) || {};
        let userAccounts = JSON.parse(localStorage.getItem('pastbin_accounts')) || {};
        let messages = JSON.parse(localStorage.getItem('pastbin_messages')) || {};
        let currentUser = JSON.parse(localStorage.getItem('pastbin_current_user')) || null;
        let currentChat = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function initUserData(username) {
            if (!userScoins[username]) {
                userScoins[username] = 100; // –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –°–∫–æ–∏–Ω—ã
            }
            if (!userInventory[username]) {
                userInventory[username] = [];
            }
            if (!userGifts[username]) {
                userGifts[username] = [];
            }
            if (!giftUpgrades[username]) {
                giftUpgrades[username] = {};
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–¥–∞—Ä–∫–æ–≤
                shopItems.gifts.forEach(gift => {
                    if (gift.basePrice) {
                        giftUpgrades[username][gift.id] = {
                            level: 0,
                            currentPrice: gift.basePrice
                        };
                    }
                });
            }
            if (!messages[username]) {
                messages[username] = {};
            }
            
            saveAllData();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function saveAllData() {
            localStorage.setItem('pastbin_scoins', JSON.stringify(userScoins));
            localStorage.setItem('pastbin_inventory', JSON.stringify(userInventory));
            localStorage.setItem('pastbin_gifts', JSON.stringify(userGifts));
            localStorage.setItem('pastbin_gift_upgrades', JSON.stringify(giftUpgrades));
            localStorage.setItem('pastbin_accounts', JSON.stringify(userAccounts));
            localStorage.setItem('pastbin_messages', JSON.stringify(messages));
            if (currentUser) {
                localStorage.setItem('pastbin_current_user', JSON.stringify(currentUser));
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –°–∫–æ–∏–Ω–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function initUserScoins(username) {
            if (!userScoins[username]) {
                userScoins[username] = 100; // –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –°–∫–æ–∏–Ω—ã
                saveAllData();
            }
            if (!userInventory[username]) {
                userInventory[username] = [];
                saveAllData();
            }
            if (!userGifts[username]) {
                userGifts[username] = [];
                saveAllData();
            }
        }

        // –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –°–∫–æ–∏–Ω–æ–≤ –∑–∞ –ø–∞—Å—Ç—ã
        function earnScoinsForPaste(username) {
            if (!userScoins[username]) {
                initUserScoins(username);
            }
            
            const earnings = 5; // –°–∫–æ–∏–Ω–æ–≤ –∑–∞ –ø–∞—Å—Ç—É
            userScoins[username] += earnings;
            saveAllData();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç–∫–∏
            const coinElement = document.getElementById('scoinBalance');
            if (coinElement) {
                coinElement.classList.add('coin-animation');
                setTimeout(() => {
                    coinElement.classList.remove('coin-animation');
                    updateScoinDisplay();
                }, 500);
            }
            
            return earnings;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –°–∫–æ–∏–Ω–æ–≤
        function updateScoinDisplay() {
            if (currentUser) {
                const balance = userScoins[currentUser.username] || 0;
                document.getElementById('scoinBalance').textContent = balance;
                document.getElementById('shopScoinBalance').textContent = balance;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω
        function showShop() {
            document.getElementById('shopSection').classList.remove('hidden');
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('profileSection').classList.add('hidden');
            document.getElementById('messengerSection').classList.add('hidden');
            document.getElementById('userMenu').classList.add('hidden');
            
            updateScoinDisplay();
            showShopCategory('backgrounds');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –º–∞–≥–∞–∑–∏–Ω–∞
        function showShopCategory(category) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.shop-category').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–≤–∞—Ä—ã
            const container = document.getElementById('shopItemsContainer');
            container.innerHTML = '';
            
            const items = shopItems[category] || [];
            
            items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop-item';
                
                const isOwned = currentUser && userInventory[currentUser.username]?.includes(item.id);
                const canAfford = currentUser && (userScoins[currentUser.username] || 0) >= item.price;
                
                // –î–ª—è —É–ª—É—á—à–∞–µ–º—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∏ —Ü–µ–Ω—É
                let currentPrice = item.price;
                let currentLevel = 0;
                
                if (item.basePrice && currentUser && giftUpgrades[currentUser.username]) {
                    const upgrade = giftUpgrades[currentUser.username][item.id];
                    if (upgrade) {
                        currentLevel = upgrade.level;
                        currentPrice = upgrade.currentPrice;
                    }
                }
                
                itemElement.innerHTML = `
                    ${item.image ? `<img src="${item.image}" alt="${item.name}" class="shop-item-image">` : ''}
                    ${item.emoji ? `<div class="gift-emoji">${item.emoji}</div>` : ''}
                    <div class="shop-item-name">${item.name}</div>
                    <div class="shop-item-price">
                        <i class="fas fa-coins"></i> ${currentPrice}
                    </div>
                    ${item.basePrice ? `<div class="shop-item-description">–£—Ä–æ–≤–µ–Ω—å: ${currentLevel}/${item.maxLevel}</div>` : ''}
                    <div class="shop-item-description">${item.description}</div>
                    ${isOwned && !item.basePrice ? 
                        '<button disabled style="background: #00c851;">–£–∂–µ –∫—É–ø–ª–µ–Ω–æ</button>' : 
                        `<button ${!canAfford ? 'disabled' : ''} onclick="purchaseItem('${item.id}', '${category}')">${canAfford ? '–ö—É–ø–∏—Ç—å' : '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –°–∫–æ–∏–Ω–æ–≤'}</button>`
                    }
                    ${item.basePrice ? `
                        <div class="gift-upgrade">
                            <div class="upgrade-level">
                                <span>–£–ª—É—á—à–µ–Ω–∏–µ:</span>
                                <span class="upgrade-cost">5 –°–∫–æ–∏–Ω–æ–≤</span>
                            </div>
                            <button ${currentLevel >= item.maxLevel ? 'disabled' : (userScoins[currentUser.username] || 0) < 5 ? 'disabled' : ''} 
                                    onclick="upgradeGift('${item.id}')">
                                ${currentLevel >= item.maxLevel ? '–ú–∞–∫—Å. —É—Ä–æ–≤–µ–Ω—å' : '–£–ª—É—á—à–∏—Ç—å'}
                            </button>
                        </div>
                    ` : ''}
                `;
                
                container.appendChild(itemElement);
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞
        function purchaseItem(itemId, category) {
            if (!currentUser) {
                showNotification('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–∫—É–ø–æ–∫', true);
                return;
            }
            
            const items = shopItems[category] || [];
            const item = items.find(i => i.id === itemId);
            
            if (!item) return;
            
            const username = currentUser.username;
            let balance = userScoins[username] || 0;
            let price = item.price;
            
            // –î–ª—è —É–ª—É—á—à–∞–µ–º—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
            if (item.basePrice && giftUpgrades[username] && giftUpgrades[username][itemId]) {
                price = giftUpgrades[username][itemId].currentPrice;
            }
            
            if (balance < price) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –°–∫–æ–∏–Ω–æ–≤!', true);
                return;
            }
            
            if (userInventory[username]?.includes(itemId) && !item.basePrice) {
                showNotification('–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç!', true);
                return;
            }
            
            // –°–ø–∏—Å–∞–Ω–∏–µ –°–∫–æ–∏–Ω–æ–≤
            userScoins[username] -= price;
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (–µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —É–ª—É—á—à–∞–µ–º—ã–π –ø–æ–¥–∞—Ä–æ–∫)
            if (!item.basePrice) {
                if (!userInventory[username]) {
                    userInventory[username] = [];
                }
                userInventory[username].push(itemId);
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveAllData();
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
            applyPurchasedItem(item);
            
            showNotification(`–í—ã –∫—É–ø–∏–ª–∏ "${item.name}" –∑–∞ ${price} –°–∫–æ–∏–Ω–æ–≤!`);
            updateScoinDisplay();
            showShopCategory(document.querySelector('.shop-category.active').getAttribute('data-category'));
        }

        // –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
        function upgradeGift(giftId) {
            if (!currentUser) return;
            
            const username = currentUser.username;
            const upgradeCost = 5; // –°—Ç–æ–∏–º–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∏—è
            
            if ((userScoins[username] || 0) < upgradeCost) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –°–∫–æ–∏–Ω–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!', true);
                return;
            }
            
            const gift = shopItems.gifts.find(g => g.id === giftId);
            if (!gift || !gift.basePrice) return;
            
            const upgrade = giftUpgrades[username][giftId];
            if (upgrade.level >= gift.maxLevel) {
                showNotification('–î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —É–ª—É—á—à–µ–Ω–∏—è!', true);
                return;
            }
            
            // –°–ø–∏—Å–∞–Ω–∏–µ –°–∫–æ–∏–Ω–æ–≤
            userScoins[username] -= upgradeCost;
            
            // –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞
            upgrade.level += 1;
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–µ–Ω—É –ø–æ–¥–∞—Ä–∫–∞ –Ω–∞ 50% –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å
            upgrade.currentPrice = Math.round(gift.basePrice * (1 + upgrade.level * 0.5));
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveAllData();
            
            showNotification(`–ü–æ–¥–∞—Ä–æ–∫ "${gift.name}" —É–ª—É—á—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è ${upgrade.level}!`);
            updateScoinDisplay();
            showShopCategory('gifts');
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫—É–ø–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
        function applyPurchasedItem(item) {
            switch (item.type) {
                case 'background':
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ñ–æ–Ω
                    userProfiles[currentUser.username] = userProfiles[currentUser.username] || {};
                    userProfiles[currentUser.username].background = item.image;
                    localStorage.setItem('pastbin_userProfiles', JSON.stringify(userProfiles));
                    showNotification('–§–æ–Ω –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω!');
                    break;
                // –î—Ä—É–≥–∏–µ —Ç–∏–ø—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–¥–∞—Ä–∫–∞
        function sendGift() {
            if (!currentUser) return;
            
            const username = currentUser.username;
            const recipient = document.getElementById('giftRecipient').value;
            
            if (!recipient) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è!', true);
                return;
            }
            
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–¥–∞—Ä–∫–∞
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫
            const gifts = shopItems.gifts.filter(g => g.basePrice);
            if (gifts.length === 0) return;
            
            const gift = gifts[0]; // –ü–µ—Ä–≤—ã–π —É–ª—É—á—à–∞–µ–º—ã–π –ø–æ–¥–∞—Ä–æ–∫
            const upgrade = giftUpgrades[username] && giftUpgrades[username][gift.id];
            const giftPrice = upgrade ? upgrade.currentPrice : gift.price;
            
            const balance = userScoins[username] || 0;
            
            if (balance < giftPrice) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –°–∫–æ–∏–Ω–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞!', true);
                return;
            }
            
            // –°–ø–∏—Å–∞–Ω–∏–µ –°–∫–æ–∏–Ω–æ–≤
            userScoins[username] -= giftPrice;
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é
            if (!userGifts[recipient]) {
                userGifts[recipient] = [];
            }
            
            const giftRecord = {
                id: gift.id,
                name: gift.name,
                emoji: gift.emoji,
                from: username,
                timestamp: new Date().toISOString(),
                level: upgrade ? upgrade.level : 0
            };
            
            userGifts[recipient].push(giftRecord);
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            saveAllData();
            
            showNotification(`–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ ${gift.emoji} ${gift.name} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${recipient}!`);
            updateScoinDisplay();
            closeModal('sendGiftModal');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞
        function showSendGiftModal() {
            const modal = document.getElementById('sendGiftModal');
            const giftSelection = document.getElementById('giftSelection');
            
            giftSelection.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∞–µ–º—ã–µ –ø–æ–¥–∞—Ä–∫–∏
            const upgradableGifts = shopItems.gifts.filter(g => g.basePrice);
            
            upgradableGifts.forEach(gift => {
                const username = currentUser.username;
                const upgrade = giftUpgrades[username] && giftUpgrades[username][gift.id];
                const giftPrice = upgrade ? upgrade.currentPrice : gift.price;
                const canAfford = currentUser && (userScoins[username] || 0) >= giftPrice;
                
                const giftElement = document.createElement('div');
                giftElement.className = 'gift-item';
                
                giftElement.innerHTML = `
                    <div class="gift-emoji">${gift.emoji}</div>
                    <div class="gift-name">${gift.name}</div>
                    <div class="shop-item-price">
                        <i class="fas fa-coins"></i> ${giftPrice}
                    </div>
                    ${upgrade ? `<div class="gift-count">–£—Ä. ${upgrade.level}</div>` : ''}
                    ${!canAfford ? '<div style="color: #ff4444; font-size: 0.7rem;">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –°–∫–æ–∏–Ω–æ–≤</div>' : ''}
                `;
                
                giftElement.onclick = () => {
                    if (canAfford) {
                        document.getElementById('giftRecipient').value = '';
                        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –ø–æ–¥–∞—Ä–∫–∞
                        showNotification(`–í—ã–±—Ä–∞–Ω –ø–æ–¥–∞—Ä–æ–∫: ${gift.name}`);
                    }
                };
                
                giftSelection.appendChild(giftElement);
            });
            
            modal.classList.remove('hidden');
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
        function renderReceivedGifts() {
            if (!currentUser) return;
            
            const container = document.getElementById('receivedGiftsContainer');
            container.innerHTML = '';
            
            const gifts = userGifts[currentUser.username] || [];
            const giftCounts = {};
            
            // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞
            gifts.forEach(gift => {
                const key = `${gift.id}_${gift.level || 0}`;
                if (!giftCounts[key]) {
                    giftCounts[key] = {
                        count: 0,
                        gift: gift
                    };
                }
                giftCounts[key].count++;
            });
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–¥–∞—Ä–∫–∏
            Object.values(giftCounts).forEach(({gift, count}) => {
                const giftElement = document.createElement('div');
                giftElement.className = 'gift-display';
                giftElement.innerHTML = `
                    <div class="gift-emoji">${gift.emoji}</div>
                    <div class="gift-count">√ó${count}</div>
                    <div class="gift-name" style="font-size: 0.7rem;">${gift.name}</div>
                    ${gift.level ? `<div class="gift-count">–£—Ä. ${gift.level}</div>` : ''}
                `;
                container.appendChild(giftElement);
            });
            
            if (gifts.length === 0) {
                container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤</p>';
            }
        }

        // –í—ã–¥–∞—á–∞ –°–∫–æ–∏–Ω–æ–≤ –∞–¥–º–∏–Ω–∞–º–∏
        function giveScoins() {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å –°–∫–æ–∏–Ω—ã', true);
                return;
            }
            
            const recipient = document.getElementById('scoinRecipient').value;
            const amount = parseInt(document.getElementById('scoinAmount').value);
            
            if (!recipient || !amount || amount <= 0) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', true);
                return;
            }
            
            if (!userScoins[recipient]) {
                initUserScoins(recipient);
            }
            
            userScoins[recipient] += amount;
            saveAllData();
            
            showNotification(`–í—ã–¥–∞–ª–∏ ${amount} –°–∫–æ–∏–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${recipient}`);
            closeModal('giveScoinsModal');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–¥–∞—á–∏ –°–∫–æ–∏–Ω–æ–≤
        function showGiveScoinsModal() {
            if (currentUser && currentUser.role === 'admin') {
                document.getElementById('giveScoinsModal').classList.remove('hidden');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ñ–æ–Ω–æ–º
        function updateProfileWithBackground() {
            if (currentUser) {
                const profile = userProfiles[currentUser.username];
                const background = profile?.background;
                
                if (background) {
                    document.getElementById('profileBackground').style.backgroundImage = `url(${background})`;
                }
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
        function createNewAccount() {
            const phoneNumber = document.getElementById('newPhoneNumber').value;
            const username = document.getElementById('newUsername').value;
            
            if (!phoneNumber || !username) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!', true);
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π –Ω–æ–º–µ—Ä –∏–ª–∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const existingAccount = Object.values(userAccounts).find(acc => 
                acc.phoneNumber === phoneNumber || acc.username === username
            );
            
            if (existingAccount) {
                showNotification('–ê–∫–∫–∞—É–Ω—Ç —Å —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º –∏–ª–∏ –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!', true);
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
            const accountId = 'acc_' + Date.now();
            userAccounts[accountId] = {
                id: accountId,
                phoneNumber: phoneNumber,
                username: username,
                createdAt: new Date().toISOString()
            };
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            initUserData(username);
            
            saveAllData();
            
            showNotification(`–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç: ${username} (${phoneNumber})`);
            closeModal('accountsModal');
            showAccountsModal();
        }

        function switchAccount() {
            showAccountsModal();
        }

        function addAccount() {
            showAccountsModal();
        }

        function showAccountsModal() {
            const modal = document.getElementById('accountsModal');
            const accountsList = document.getElementById('accountsList');
            
            accountsList.innerHTML = '';
            
            Object.values(userAccounts).forEach(account => {
                const accountElement = document.createElement('div');
                accountElement.className = 'user-menu-item';
                accountElement.innerHTML = `
                    <div>${account.username}</div>
                    <div style="font-size: 0.8rem; color: #aaa;">${account.phoneNumber}</div>
                `;
                
                accountElement.onclick = () => {
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
                    currentUser = {
                        username: account.username,
                        phoneNumber: account.phoneNumber
                    };
                    localStorage.setItem('pastbin_current_user', JSON.stringify(currentUser));
                    
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                    initUserData(account.username);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    updateUIForUser();
                    showNotification(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç: ${account.username}`);
                    closeModal('accountsModal');
                };
                
                accountsList.appendChild(accountElement);
            });
            
            modal.classList.remove('hidden');
        }

        // –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
        function showMessenger() {
            document.getElementById('messengerSection').classList.remove('hidden');
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('profileSection').classList.add('hidden');
            document.getElementById('shopSection').classList.add('hidden');
            document.getElementById('userMenu').classList.add('hidden');
            
            loadContacts();
        }

        function loadContacts() {
            if (!currentUser) return;
            
            const contactsList = document.getElementById('contactsList');
            contactsList.innerHTML = '';
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫–∞
            const userMessages = messages[currentUser.username] || {};
            const contacts = Object.keys(userMessages);
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–∫–∂–µ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            Object.values(userAccounts).forEach(account => {
                if (account.username !== currentUser.username && !contacts.includes(account.username)) {
                    contacts.push(account.username);
                }
            });
            
            // –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
            const uniqueContacts = [...new Set(contacts)];
            
            if (uniqueContacts.length === 0) {
                contactsList.innerHTML = '<div class="contact">–ù–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤</div>';
                return;
            }
            
            uniqueContacts.forEach(contact => {
                const contactElement = document.createElement('div');
                contactElement.className = 'contact';
                contactElement.innerHTML = `
                    <div class="contact-name">${contact}</div>
                `;
                
                contactElement.onclick = () => {
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
                    document.querySelectorAll('.contact').forEach(c => {
                        c.classList.remove('active');
                    });
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–º—É –∫–æ–Ω—Ç–∞–∫—Ç—É
                    contactElement.classList.add('active');
                    
                    openChat(contact);
                };
                
                contactsList.appendChild(contactElement);
            });
        }

        function openChat(contact) {
            currentChat = contact;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á–∞—Ç–∞
            document.getElementById('chatHeader').textContent = `–ß–∞—Ç —Å ${contact}`;
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            document.getElementById('messageInput').disabled = false;
            document.getElementById('sendMessageBtn').disabled = false;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            loadMessages(contact);
        }

        function loadMessages(contact) {
            if (!currentUser) return;
            
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            const userMessages = messages[currentUser.username] || {};
            const contactMessages = userMessages[contact] || [];
            
            if (contactMessages.length === 0) {
                chatMessages.innerHTML = '<div class="message">–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</div>';
                return;
            }
            
            contactMessages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${msg.sender === currentUser.username ? 'sent' : 'received'}`;
                
                const time = new Date(msg.timestamp).toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                messageElement.innerHTML = `
                    ${msg.sender !== currentUser.username ? `<div class="message-sender">${msg.sender}</div>` : ''}
                    <div class="message-text">${msg.text}</div>
                    <div class="message-time">${time}</div>
                `;
                
                chatMessages.appendChild(messageElement);
            });
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            if (!currentUser || !currentChat) return;
            
            const messageInput = document.getElementById('messageInput');
            const text = messageInput.value.trim();
            
            if (!text) return;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
            if (!messages[currentUser.username]) {
                messages[currentUser.username] = {};
            }
            if (!messages[currentUser.username][currentChat]) {
                messages[currentUser.username][currentChat] = [];
            }
            
            messages[currentUser.username][currentChat].push({
                sender: currentUser.username,
                text: text,
                timestamp: new Date().toISOString()
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
            if (!messages[currentChat]) {
                messages[currentChat] = {};
            }
            if (!messages[currentChat][currentUser.username]) {
                messages[currentChat][currentUser.username] = [];
            }
            
            messages[currentChat][currentUser.username].push({
                sender: currentUser.username,
                text: text,
                timestamp: new Date().toISOString()
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            saveAllData();
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            messageInput.value = '';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —á–∞—Ç
            loadMessages(currentChat);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
        function initShop() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–∞–≥–∞–∑–∏–Ω–∞
            document.querySelectorAll('.shop-category').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.getAttribute('data-category');
                    showShopCategory(category);
                });
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–¥–∞—Ä–∫–∞ –≤ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userMenu = document.getElementById('userMenu');
            const sendGiftItem = document.createElement('div');
            sendGiftItem.className = 'user-menu-item';
            sendGiftItem.innerHTML = '<i class="fas fa-gift"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫';
            sendGiftItem.onclick = showSendGiftModal;
            userMenu.insertBefore(sendGiftItem, userMenu.children[2]);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤—ã–¥–∞—á–∏ –°–∫–æ–∏–Ω–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
            if (currentUser && currentUser.role === 'admin') {
                const giveScoinsItem = document.createElement('div');
                giveScoinsItem.className = 'user-menu-item';
                giveScoinsItem.innerHTML = '<i class="fas fa-coins"></i> –í—ã–¥–∞—Ç—å –°–∫–æ–∏–Ω—ã';
                giveScoinsItem.onclick = showGiveScoinsModal;
                userMenu.insertBefore(giveScoinsItem, userMenu.children[3]);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function updateUIForUser() {
            if (currentUser) {
                document.getElementById('userName').textContent = currentUser.username;
                document.getElementById('userInfo').classList.remove('hidden');
                document.getElementById('loginBtn').classList.add('hidden');
                document.getElementById('registerBtn').classList.add('hidden');
                document.getElementById('addPasteBtn').classList.remove('hidden');
                document.getElementById('logoutBtn').classList.remove('hidden');
                
                updateScoinDisplay();
                updateProfileWithBackground();
                renderReceivedGifts();
            } else {
                document.getElementById('userInfo').classList.add('hidden');
                document.getElementById('loginBtn').classList.remove('hidden');
                document.getElementById('registerBtn').classList.remove('hidden');
                document.getElementById('addPasteBtn').classList.add('hidden');
                document.getElementById('logoutBtn').classList.add('hidden');
            }
        }

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logout() {
            currentUser = null;
            localStorage.removeItem('pastbin_current_user');
            updateUIForUser();
            showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, isError = false) {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                background: ${isError ? '#ff4444' : '#00c851'};
                color: white;
                border-radius: 8px;
                z-index: 10000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: fadeIn 0.3s ease-out;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Å—Ç—ã –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –°–∫–æ–∏–Ω–æ–≤
        function createPaste(title, content, expiration, visibility) {
            // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Å—Ç—ã...
            
            // –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –°–∫–æ–∏–Ω–æ–≤
            if (currentUser) {
                const earnings = earnScoinsForPaste(currentUser.username);
                showNotification(`–ü–∞—Å—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞! +${earnings} –°–∫–æ–∏–Ω–æ–≤`);
            }
            
            // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥...
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
            initShop();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (currentUser) {
                initUserData(currentUser.username);
                updateUIForUser();
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('userInfo').addEventListener('click', function(e) {
                e.stopPropagation();
                document.getElementById('userMenu').classList.toggle('hidden');
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function() {
                document.getElementById('userMenu').classList.add('hidden');
            });
            
            // –û—Å—Ç–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        // –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        let userProfiles = JSON.parse(localStorage.getItem('pastbin_userProfiles')) || {};
    </script>
</body>
  </html>
